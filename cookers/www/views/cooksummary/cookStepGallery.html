<ion-view title="stepgallery" >

    <ion-nav-buttons side="left">
        <button class="button button-small button-clear" ng-click="cookSumarryModify()">
            {{modifyCondition ? '편집완료' : '편집'}}
        </button>
    </ion-nav-buttons>

    <ion-nav-buttons side="right">
        <button class="button button-small button-clear" ng-click="cookSumarryComplete()">
            완료
        </button>
    </ion-nav-buttons>

    <ion-content padding="true">

        <div class="row" ng-show="cook.steps.length == 0" style="width: 100%;">
            <div class="col col-33" ng-click="selectStep()">
                <div class="completePhoto" style="background-image: url({{cook.comple_photo.base64_data}});"></div>
            </div>
            <div class="col col-33" ng-click="addStep()" style="height:100px;">
                <button class="button button-assertive icon ion-plus-round button-plus"></button>
            </div>
        </div>

        <div class="row" ng-repeat ='step in cook.steps' ng-show="cook.steps.length !=0"
             ng-if ='$index == 0 || $index % 3 == 2' style="padding:5px; margin-top: 0px;">

            <div class="col col-33" ng-if = '$index==0' ng-click="selectStep()">
                <div class="completePhoto" style="background-image: url({{cook.comple_photo.base64_data}});"></div>
            </div>

            <div class="col col-33" ng-if="$index < cook.steps.length"
                 ng-click="selectStep($index)" >
                <div class="step" style="background-image : url({{cook.steps[$index].photo.base64_data}});">
                    <div class="row" style="padding:0px;">
                        <div class="col-50" style="text-align: left;">
                            <a class="button-small icon ion-ios-flower-outline"
                               ng-if="$index == cook.steps.length - 1"></a>
                        </div>
                        <div class="col-50" style="text-align: right;">
                            <a class="button-small icon ion-close-circled"
                               ng-click="deleteStep($index, true);"
                               ng-show="modifyCondition"></a>
                        </div>
                    </div>
                </div>
                <!--<img ng-src="{{cook.steps[$index].path}}" width="100%" />-->
            </div>

            <div class="col col-33" ng-if="$index + 1 < cook.steps.length"
                 ng-click="selectStep($index+1)">
                <div class="step" style="background-image: url({{cook.steps[$index+1].photo.base64_data}});">
                    <div class="row" style="padding:0px;">
                        <div class="col-50" style="text-align: left;">
                            <a class="button-small icon ion-ios-flower-outline"
                               ng-if="$index + 1 == cook.steps.length -1 "></a>
                        </div>
                        <div class="col-50" style="text-align: right;">
                            <a class="button-small icon ion-close-circled"
                               ng-click="deleteStep($index+1, true);"
                               ng-show="modifyCondition"></a>
                        </div>
                    </div>
                </div>
                <!--<img ng-src="{{cook.steps[$index+1].path}}" width="100%" />-->
            </div>

            <div class="col col-33" ng-if="$index + 2 < cook.steps.length && $index != 0"
                 ng-click="selectStep($index+2)">
                <div class="step" style="background-image: url({{cook.steps[$index+2].photo.base64_data}});">
                    <div class="row" style="padding:0px;">
                        <div class="col-50" style="text-align: left;">
                            <a class="button-small icon ion-ios-flower-outline"
                               ng-if="$index + 2 == cook.steps.length -1"></a>
                        </div>
                        <div class="col-50" style="text-align: right;">
                            <a class="button-small icon ion-close-circled"
                               ng-click="deleteStep($index+2, true);"
                               ng-show="modifyCondition"></a>
                        </div>
                    </div>
                </div>
                <!--<img ng-src="{{cook.steps[$index+2].path}}" width="100%" />-->
            </div>

            <div class="col col-33" style="height:100px;"
                 ng-if="($index == cook.steps.length-1 || ($index!=0 && $index+1 == cook.steps.length-1))
                        && cook.steps.length < 10" ng-click="addStep()">
                <button class="button button-assertive icon ion-plus-round button-plus"></button>
            </div>
        </div>

        <div class="row" id="alone_button_div" ng-show="plus_button_condition">
            <div class="col col-33 button-plus" ng-click="addStep()" style="height:100px;">
                <button class="button button-assertive icon ion-plus-round button-plus"></button>
            </div>
        </div>
    </ion-content>
</ion-view>
